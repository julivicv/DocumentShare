{% include "components/head.html" %}

<a href="./logout" class="btn m-1">Logout</a>
<h1 class="text-2xl text-center m-10 font-bold">{{ title }}</h1>

<div class="btm-nav">
  <a href="./view-files" class="active">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-5 w-5"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
      />
    </svg>
    <span class="btm-nav-label">View your files</span>
  </a>
  <a href="./home">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-5 w-5"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    </svg>
    <span class="btm-nav-label">Home</span>
  </a>
  <a href="./submit-file">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-5 w-5"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    </svg>
    <span class="btm-nav-label">Submit Files</span>
  </a>
</div>

<form class="flex" action="./view-files" method="post">
    <div class="form-control m-auto my-10">
      <div class="input-group">

      <input
        type="text"
        name="search"
        class="input input-bordered"
        placeholder="Search your file"
      />
      <button class="btn btn-square">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
      </button>
    </div>
    </div>
    </form>

  <div class="flex justify-center w-fit m-auto">
    <table class="table table-zebra w-full">
      <thead class="">
        <tr>
          <th class="py-2">Date</th>
          <th class="py-2">File</th>
          <th class="py-2 px-4">Actions</th>
        </tr>
      </thead>
      <tbody class="">
        {% for file in files %}
        <tr class="">
          <td class="py-2">{{ file['created_at'] }}</td>
          <td class="py-2">
            <a href="{{ file['path'] }}" class="text-blue-500 hover:underline">
              {{ file['name'] }}
            </a>
          </td>
          <td class="py-2">
            {% if file['can_delete'] == 1 %}
            <a
              class="bg-red-400 text-white h-[30px] px-2 py-1 rounded"
              href="./delete-file?id={{ file['id'] }}"
            >
              Delete
            </a>
            {% else %}
            <div
            class="bg-zinc-600 text-white h-[30px] px-2 py-1 rounded flex"
            >
            <svg xmlns="http://www.w3.org/2000/svg" class="m-auto" width="15" height="15" fill="#000000" viewBox="0 0 256 256"><path d="M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm84,108a83.6,83.6,0,0,1-16.75,50.28L77.72,60.75A84,84,0,0,1,212,128ZM44,128A83.6,83.6,0,0,1,60.75,77.72L178.28,195.25A84,84,0,0,1,44,128Z"></path></svg>
            </div>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% include "components/foot.html" %}
</div>
